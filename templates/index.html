{% extends "layout.html" %}

{% block title %}Coachfinder{% endblock %}

{% block content %}
<h2>Etusivu</h2>

{% if session.username %}
<section aria-labelledby="welcome-heading">
  <h3 id="welcome-heading">Tervetuloa</h3>
  <p>Hei {% if profile.display_name %}{{ profile.display_name }}{% endif %}! Olet kirjautunut tunnuksella {{ session.username }}, id-numerosi on {{ session.user_id }}.
  </p>
</section>
{% endif %}

<section aria-labelledby="student-announcements-heading">
  <h3 id="student-announcements-heading">Oppilasilmoitukset (Etsin valmentajaa)</h3>
  {% if student_announcements %}
  {% for announcement in student_announcements %}
  <article class="announcement">
    <h4>
      <a href="/announcement/{{ announcement.id }}">
        {{ announcement.sport }}{% if announcement.display_name %} - {{ announcement.display_name }} ({{ announcement.username }}){% else %} - {{ announcement.username }}{% endif %}
      </a>
      {% if announcement.found %} <span style="background-color: #28a745; color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.8em; margin-left: 8px;">Valmentaja löydetty</span>{% endif %}
    </h4>
    <p class="meta">
      {{ announcement.city }} (ikäryhmä: {{ announcement.age_group }}, taso: {{ announcement.skill_level }})
    </p>
    <div class="description">{{ announcement.description.strip() }}</div>
  </article>
  {% endfor %}
  {% else %}
  <p>Ei oppilasilmoituksia vielä.</p>
  {% endif %}
  
  {% if student_page_count > 1 %}
  <div class="pagination">
    <p>
      {% if page > 1 %}
      <a href="/{{ page - 1 }}">&lt;&lt;</a>
      {% endif %}
      Sivu {{ page }}/{{ student_page_count }}
      {% if page < student_page_count %}
      <a href="/{{ page + 1 }}">&gt;&gt;</a>
      {% endif %}
    </p>
  </div>
  {% endif %}
</section>

<section aria-labelledby="coach-announcements-heading">
  <h3 id="coach-announcements-heading">Valmentajailmoitukset (Etsin valmennettavaa)</h3>
  {% if coach_announcements %}
  {% for announcement in coach_announcements %}
  <article class="announcement">
    <h4>
      <a href="/announcement_coach/{{ announcement.id }}">
        {{ announcement.sport }}{% if announcement.display_name %} - {{ announcement.display_name }} ({{ announcement.username }}){% else %} - {{ announcement.username }}{% endif %}
      </a>
      {% if announcement.found %} <span style="background-color: #28a745; color: white; padding: 2px 6px; border-radius: 3px; font-size: 0.8em; margin-left: 8px;">Valmennettavat löydetty</span>{% endif %}
    </h4>
    <p class="meta">
      {{ announcement.city }} (kokemus: {{ announcement.experience_level }})
    </p>
    <div class="description">{{ announcement.description.strip() }}</div>
  </article>
  {% endfor %}
  {% else %}
  <p>Ei valmentajailmoituksia vielä.</p>
  {% endif %}
  
  {% if coach_page_count > 1 %}
  <div class="pagination">
    <p>
      {% if page > 1 %}
      <a href="/{{ page - 1 }}">&lt;&lt;</a>
      {% endif %}
      Sivu {{ page }}/{{ coach_page_count }}
      {% if page < coach_page_count %}
      <a href="/{{ page + 1 }}">&gt;&gt;</a>
      {% endif %}
    </p>
  </div>
  {% endif %}
</section>
{% endblock %}